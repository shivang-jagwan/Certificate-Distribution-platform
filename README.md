# ğŸ“ Certificate Distribution System

A complete FastAPI-based certificate generation and distribution system with CSV data storage, dynamic certificate generation using Pillow, and a modern web interface.

## ğŸ“‹ Features

- âœ… **CSV-based student data storage** (no database required)
- âœ… **Dynamic certificate generation** with personalized names and IDs
- âœ… **PDF export** using Pillow
- âœ… **Web interface** for certificate search and download
- âœ… **RESTful API** with multiple endpoints
- âœ… **Admin protection** for bulk operations
- âœ… **Health check endpoint** for monitoring
- âœ… **Professional certificate template** with decorative borders

## ğŸ—ï¸ Project Structure

```
certificate-project/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                    # FastAPI application
â”‚   â”œâ”€â”€ certificate_generator.py   # Certificate generation logic
â”‚   â””â”€â”€ csv_handler.py             # CSV data handling
â”œâ”€â”€ data/
â”‚   â””â”€â”€ students.csv               # Student data
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ certificate_template.jpg   # Certificate template (generated by setup)
â”‚   â””â”€â”€ index.html                 # Web interface
â”œâ”€â”€ certificates/                  # Generated certificates (auto-created)
â”œâ”€â”€ setup_template.py              # One-time setup script
â”œâ”€â”€ requirements.txt               # Python dependencies
â””â”€â”€ README.md                      # This file
```

## ğŸš€ Setup Instructions

### 1. Install Dependencies

```bash
cd "d:/certificate project"
pip install -r requirements.txt
```

### 1b. (Optional) Frontend Dev Server (React + Tailwind + Framer Motion)

This repo includes a premium SaaS-style React SPA in `frontend/`.

```bash
cd "d:/certificate project/frontend"
npm install
npm run dev
```

The frontend dev server runs at `http://localhost:5173` and proxies API calls to `http://localhost:8000`.

If your FastAPI server runs on a different port (e.g. 8001), set `VITE_BACKEND_ORIGIN`:

```bash
cd "d:/certificate project/frontend"
copy .env.example .env
```

Then edit `frontend/.env`:

```
VITE_BACKEND_ORIGIN=http://localhost:8001
```

### 2. Generate Certificate Template

Run the setup script once to create the certificate template:

```bash
python setup_template.py
```

This will create `templates/certificate_template.jpg` with a professional design.

### 3. Start the Server

```bash
uvicorn app.main:app --reload
```

The server will start at `http://localhost:8000`

## ğŸ“¡ API Endpoints

### `GET /`
Serves the HTML web interface for certificate search and download.

### `GET /health`
Health check endpoint for monitoring.

**Response:**
```json
{
  "status": "running"
}
```

### `GET /verify?name=...&student_id=...`
Verify a workshop attendee and return student information.

**Example:** `GET /verify?name=Aditya%20singh&student_id=25101280272`

**Response:**
```json
{
  "name": "Shivang Gezval",
  "email": "shivang@gmail.com",
  "certificate_id": "CERT-2026-001",
  "valid": true
}
```

### `GET /certificate/{certificate_id}`
Generate (if not exists) and download certificate as PDF.

### `GET /certificate?name=...&student_id=...`
Generate (if not exists) and download certificate as PDF.

**Example:** `GET /certificate?name=Aditya%20singh&student_id=25101280272`

**Response:** PDF file download

### `GET /generate-all?admin_key={key}`
**[Admin Protected]** Generate all certificates from CSV.

**Example:** `GET /generate-all?admin_key=ADMIN123`

**Response:**
```json
{
  "success": true,
  "total_students": 5,
  "generated": 5,
  "skipped": 0,
  "generated_ids": ["CERT-2026-001", "CERT-2026-002", ...],
  "skipped_ids": []
}
```

**Admin Key:** `ADMIN123` (change in `app/main.py` for production)

## ğŸ§ª Testing

### Test via Browser

1. Open `http://localhost:8000`
2. Enter student name + student ID
3. Click "Download Certificate"
4. Verify PDF downloads successfully

### Test via API

```bash
# Health check
curl http://localhost:8000/health

# Verify student
curl "http://localhost:8000/verify?name=Aditya%20singh&student_id=25101280272"

# Download certificate
curl "http://localhost:8000/certificate?name=Aditya%20singh&student_id=25101280272" -o certificate.pdf

# Generate all (admin)
curl "http://localhost:8000/generate-all?admin_key=ADMIN123"
```

## ğŸ“Š CSV Data Format

The default data source is the workshop attendance export:

- `data/Workshop-I Attendance Form (Responses).csv`

It should have the following headers:

```csv
Timestamp,Name,Email_id,Student_Id,Course,Code
```

There is also an older legacy file `data/students.csv` (different schema) which is not used by default.

```csv
id,name,email,certificate_id
1,Shivang Gezval,shivang@gmail.com,CERT-2026-001
2,Tripti Taneja,tripti@gmail.com,CERT-2026-002
```

**Matching rules:**
- Name matching is case-insensitive after trimming.
- Student ID matching is exact after trimming.

**Certificate ID format:**
- `CERT-WORKSHOP1-{student_id}`

## ğŸ§± Serving the React UI from FastAPI (Production)

If you build the frontend, FastAPI will automatically serve the SPA from `frontend/dist`.

```bash
cd "d:/certificate project/frontend"
npm run build
```

Then run FastAPI normally and open `http://localhost:8000`.

## ğŸš€ Deploy to GitHub + Vercel

This repo is ready for a Vercel deployment with:
- Frontend (React) as a static build
- Backend (FastAPI) as a Python Serverless Function

### 1) Push to GitHub

Make sure you do **not** commit `node_modules/`, `dist/`, or generated PDFs. A root `.gitignore` is included.

### 2) Deploy on Vercel

1. Import the GitHub repo into Vercel.
2. Vercel will use `vercel.json` at the repo root.

Production routing:
- The SPA is served from the static build output (`frontend/dist`).
- API requests to `/verify`, `/certificate`, `/health`, `/generate-all` are routed to the Python function at `api/index.py`.

Serverless note:
- Vercel has an **ephemeral filesystem**, so PDF caching to `certificates/` is disabled there.
- Certificates are generated and streamed per request on Vercel.

## ğŸ”§ Configuration

### Change Admin Key

Edit `app/main.py`:

```python
ADMIN_KEY = "YOUR_SECRET_KEY_HERE"
```

**Important:** In production, use environment variables instead of hardcoding.

### Customize Certificate Template

Modify `setup_template.py` to change:
- Colors and borders
- Text positioning
- Decorative elements
- Image dimensions

Then re-run: `python setup_template.py`

## ğŸ“ Adding New Students

1. Open `data/students.csv`
2. Add new row with student information
3. Ensure unique `certificate_id`
4. Save file
5. Generate certificates using `/generate-all` endpoint

## ğŸ› ï¸ Technology Stack

- **FastAPI** - Modern web framework
- **Pillow** - Image manipulation and PDF generation
- **Uvicorn** - ASGI server
- **Jinja2** - Template engine
- **Python 3.10+**

## ğŸ“¦ Dependencies

```
fastapi==0.109.0
uvicorn[standard]==0.27.0
pillow==10.2.0
python-multipart==0.0.6
jinja2==3.1.3
```

## ğŸ¨ Certificate Design

The certificate template includes:
- Professional gold borders
- Decorative corner elements
- Centered text placement
- High resolution (1920x1080)
- Dynamic name and ID positioning

## ğŸ”’ Security Notes

- Admin key protection is basic - use proper authentication in production
- Consider rate limiting for public endpoints
- Validate all user inputs
- Use HTTPS in production
- Store admin keys in environment variables

## ğŸ› Troubleshooting

### Template Not Found Error
Run `python setup_template.py` to generate the template.

### Font Issues
The system uses fallback fonts. If you want custom fonts:
1. Install desired font on your system
2. Modify font path in `certificate_generator.py`

### Port Already in Use
Change port in startup command:
```bash
uvicorn app.main:app --reload --port 8001
```

## ğŸ“„ License

This project is for educational purposes.

## ğŸ‘¨â€ğŸ’» Author

Certificate Distribution System - FastAPI Implementation

---

**Happy Certificate Distribution! ğŸ‰**
